<div class="oh-modal__dialog-header">
    <span class="font-bold text-xl"> {{ log.subject|title|escapejs }} </span>
    <button class="oh-modal__close" aria-label="Close">
    <ion-icon name="close-outline"></ion-icon>
    </button>
</div>

<div class="m-5">
    <iframe
        id="mailContent"
        height="500"
        width="600"
        src="about:blank"
    ></iframe>
</div>

<div class="p-5">
{% if instance_ids %}
    <div class="flex gap-1 justify-end">
        <button
            data-action="previous"
            hx-get="{{ previous_url }}?{{ ids_key }}={{ instance_ids }}{% if extra_query %}&{{ extra_query }}{% endif %}"
            hx-on:click="$('#detailViewContainer').toggleClass('animate-pulse');"
            hx-target="#genericModalBody"
            class="p-2 w-8 h-8 justify-center bg-primary-600 text-white rounded-full text-xs flex items-center gap-2 hover:bg-primary-800 transition duration-300"
        >
            <i class="fa-solid fa-angle-left"></i>
        </button>
        <button
            data-action="next"
            hx-get="{{ next_url }}?{{ ids_key }}={{ instance_ids }}{% if extra_query %}&{{ extra_query }}{% endif %}"
            hx-target="#genericModalBody"
            hx-on:click="$('#detailViewContainer').toggleClass('animate-pulse');"
            class="p-2 w-8 h-8 justify-center bg-primary-600 text-white rounded-full text-xs flex items-center gap-2 hover:bg-primary-800 transition duration-300"
        >
            <i class="fa-solid fa-angle-right"></i>
        </button>
    </div>
{% endif %}
</div>

<script>
	var iframe = document.getElementById("mailContent");

	var iframeDoc = iframe.contentDocument || iframe.contentWindow.document;

	var logSubject = "{{ log.subject|escapejs }}";
	var logBody = "{{ log.body|escapejs }}";
	var trimmedBody = logBody.trim();
	var hasContent = trimmedBody.length > 0;

	if (hasContent) {
		content = '<div class="oh-modal__dialog-body">' + logBody + "</div>";
	} else {
		content =
			'<div class="oh-modal__dialog-title" style="padding:25px;">' +
			logSubject +
			"</div>";
	}

	iframeDoc.open();
	iframeDoc.write(content);
	iframeDoc.close();
</script>
