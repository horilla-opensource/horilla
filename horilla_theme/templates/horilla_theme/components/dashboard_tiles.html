{% load static i18n horillafilters basefilters accessibility_filters %}

{% for chart in charts %}
    {% if chart == "gender_chart" and 'gender_chart'|feature_is_accessible:request and "gender_chart" in charts %}
        <!-- Gender Chart -->
        <div
            class="xl:col-span-6 md:col-span-12 col-span-12 bg-white p-6 rounded-md shadow-card group"
            id="gender_chart"
        >
            <div class="flex justify-between items-center mb-2">
                <h3 class="text-md font-semibold">{% trans "Gender Chart" %}</h3>
                <span class="float-end hidden group-hover:block " role="button"
                    hx-post="{% url 'dashboard-components-toggle' %}?chart_id=gender_chart"
                    hx-target="closest .shadow-card" hx-swap="outerHTML"
                >
                    <i class="material-icons fw-lighter fs-5">close</i>
                </span>
            </div>
            <div class="w-full max-w-xs mx-auto">
                <div class="relative">
                    <canvas id="genderChart"></canvas>
                </div>
            </div>
        </div>

    {% elif chart == "employees_chart" and 'employees_chart'|feature_is_accessible:request and "employees_chart" in charts %}
        <!-- Employees Chart -->
        <div
            class="xl:col-span-6 md:col-span-12 col-span-12 bg-white p-6 rounded-md shadow-card group"
            id="employees_chart"
        >
            <div class="flex justify-between items-center mb-2">
                <h3 class="text-md font-semibold">{% trans "Employees Chart" %}</h3>

                <span class="float-end hidden group-hover:block " role="button"
                    hx-post="{% url 'dashboard-components-toggle' %}?chart_id=employees_chart"
                    hx-target="closest .shadow-card" hx-swap="outerHTML"
                >
                    <i class="material-icons fw-lighter fs-5">close</i>
                </span>
            </div>
            <div class="w-full max-w-xs mx-auto">
                <div class="relative">
                    <canvas id="totalEmployees"></canvas>
                </div>
                <div
                    id="employeeChartLegend"
                    class="mt-4 flex justify-center flex-wrap gap-3 text-xs"
                ></div>
            </div>
        </div>

    {% elif chart == "shift_request_approve" and "shift_request_approve" in charts %}
        <!-- Shift Request Approve Table -->
        <div
            class="xl:col-span-6 md:col-span-12 col-span-12 bg-white p-6 rounded-md shadow-card group"
            id="shift_request_approve"
        >
            <div class="flex justify-between items-center mb-2">
                <h3 class="text-md font-semibold">
                    {% trans "Shift Requests to Approve" %}
                </h3>
                <span class="float-end hidden group-hover:block " role="button"
                    hx-post="{% url 'dashboard-components-toggle' %}?chart_id=shift_request_approve"
                    hx-target="closest .shadow-card" hx-swap="outerHTML"
                >
                    <i class="material-icons fw-lighter fs-5">close</i>
                </span>
            </div>
            <div
                class="w-full overflow-x-auto overflow-y-auto"
                id="shiftRequestApprove"
                hx-get="{% url 'dashboard-shift-request' %}"
                hx-trigger="load"
            ></div>
        </div>

    {% elif chart == "work_type_request_approve" and "work_type_request_approve" in charts %}
        <!-- Work Type Approve Table -->
        <div
            class="xl:col-span-6 md:col-span-12 col-span-12 bg-white p-6 rounded-md shadow-card group"
            id="work_type_request_approve"
        >
            <div class="flex justify-between items-center mb-2">
                <h3 class="text-md font-semibold">
                    {% trans "Work Type Requests to Approve" %}
                </h3>
                <span class="float-end hidden group-hover:block " role="button"
                    hx-post="{% url 'dashboard-components-toggle' %}?chart_id=work_type_request_approve"
                    hx-target="closest .shadow-card" hx-swap="outerHTML"
                >
                    <i class="material-icons fw-lighter fs-5">close</i>
                </span>
            </div>
            <div
                class="w-full overflow-x-auto overflow-y-auto"
                id="shiftRequestApprove"
                hx-get="{% url 'dashboard-work-type-request' %}"
                hx-trigger="load"
            ></div>
        </div>

    {% elif chart == "employee_work_info" and "employee_work_info" in charts %}
        <!-- Work Info Table -->
        <div
            class="xl:col-span-6 md:col-span-12 col-span-12 bg-white p-6 rounded-md shadow-card group"
            id="employee_work_info"
        >
            <div class="flex justify-between items-center mb-2">
                <h3 class="text-md font-semibold">
                    {% trans "Employee Work Information" %}
                </h3>
                <span class="float-end hidden group-hover:block " role="button"
                    hx-post="{% url 'dashboard-components-toggle' %}?chart_id=employee_work_info"
                    hx-target="closest .shadow-card" hx-swap="outerHTML"
                >
                    <i class="material-icons fw-lighter fs-5">close</i>
                </span>
            </div>
            <div
                class="flex items-center gap-2 w-full mb-3 flex-wrap sm:flex-nowrap"
            >
                <div class="relative w-full">
                    <input
                        type="text"
                        hx-get="{% url 'emp-workinfo-complete' %}"
                        hx-target="#pending"
                        hx-trigger="keyup changed delay:0.3s"
                        id="employeeSearch"
                        name="search"
                        placeholder="Search Employee"
                        class="text-color-600 ps-10 p-2 placeholder:text-xs w-full border border-dark-50 rounded-md focus-visible:outline-0 placeholder:text-dark-100 text-sm [transition:.3s] focus:border-primary-600"
                    />
                    <i
                        class="fas fa-search absolute left-3 top-0 bottom-0 m-auto flex items-center opacity-50 text-sm"
                    ></i>
                </div>
            </div>
            <div
                class="overflow-hidden overflow-x-auto"
                hx-get="{% url 'emp-workinfo-complete' %}"
                hx-trigger="load"
            ></div>
        </div>

    {% elif chart == "recruitment_analytics" and "recruitment_analytics" in charts %}
        <!-- Recruitment Analytic Chart -->
        <div
            class="xl:col-span-6 md:col-span-12 col-span-12 bg-white p-6 rounded-md shadow-card group"
            id="recruitment_analytics"
        >
            <div class="flex justify-between items-center mb-2">
                <h3 class="text-md font-semibold">
                    {% trans "Recruitment Analytics" %}
                </h3>

                <span class="float-end hidden group-hover:block " role="button"
                    hx-post="{% url 'dashboard-components-toggle' %}?chart_id=recruitment_analytics"
                    hx-target="closest .shadow-card" hx-swap="outerHTML"
                >
                    <i class="material-icons fw-lighter fs-5">close</i>
                </span>
                <!-- <button class="w-3 h-3">
                            <img src="/static/horilla_theme/assets/icons/right-arrow.svg" alt="" class="rotate-45">
                        </button> -->
            </div>
            <div class="relative">
                <canvas id="recruitmentChart1" class="w-full h-96"></canvas>
            </div>
        </div>

    {% elif chart == "department_chart" and "department_chart" in charts %}
        <!-- Department Chart -->
        <div
            class="xl:col-span-6 md:col-span-12 col-span-12 bg-white p-6 rounded-md shadow-card group"
            id="department_chart"
        >
            <div class="flex justify-between items-center mb-2">
                <h3 class="text-md font-semibold">{% trans "Department Chart" %}</h3>

                <span class="float-end hidden group-hover:block " role="button"
                    hx-post="{% url 'dashboard-components-toggle' %}?chart_id=department_chart"
                    hx-target="closest .shadow-card" hx-swap="outerHTML"
                >
                    <i class="material-icons fw-lighter fs-5">close</i>
                </span>
                <!-- <button class="w-3 h-3">
                    <img src="/static/horilla_theme/assets/icons/right-arrow.svg" alt="" class="rotate-45">
                </button> -->
            </div>
            <div class="flex items-center justify-between flex-col">
                <div class="md:w-60 w-full max-w-xs mx-auto relative">
                    <canvas id="departmentChart"></canvas>
                </div>
                <div
                    id="chartLegend"
                    class="text-xs flex gap-3 flex-wrap justify-center"
                >
                </div>
            </div>
        </div>

    {% elif chart == "key_result_status" and "key_result_status" in charts %}
        <!-- Key Result Chart -->
        <div
            class="xl:col-span-6 md:col-span-12 col-span-12 bg-white p-6 rounded-md shadow-card group"
            id="key_result_status"
        >
            <div class="flex justify-between items-center mb-2">
                <h3 class="text-md font-semibold">
                    {% trans "Key Result Status" %}
                </h3>

                <span class="float-end hidden group-hover:block " role="button"
                    hx-post="{% url 'dashboard-components-toggle' %}?chart_id=key_result_status"
                    hx-target="closest .shadow-card" hx-swap="outerHTML"
                >
                    <i class="material-icons fw-lighter fs-5">close</i>
                </span>
            </div>
            <div class="oh-card-dashboard__body relative">
                <canvas id="keyResultChart" style="cursor: pointer"></canvas>
            </div>
        </div>

    {% elif chart == "attendance_validate" and "attendance_validate" in charts %}
        <!-- Validate Attendance Chart -->
        <div
            class="xl:col-span-6 md:col-span-12 col-span-12 bg-white p-6 rounded-md shadow-card group"
            id = "attendance_validate"
        >
            <div class="flex justify-between items-center mb-2">
                <h3 class="text-md font-semibold">
                    {% trans "Attendance To Validate" %}
                </h3>

                <span class="float-end hidden group-hover:block " role="button"
                    hx-post="{% url 'dashboard-components-toggle' %}?chart_id=attendance_validate"
                    hx-target="closest .shadow-card" hx-swap="outerHTML"
                >
                    <i class="material-icons fw-lighter fs-5">close</i>
                </span>
            </div>
            <div
                class="overflow-hidden overflow-x-auto"
                hx-get="{% url 'dashboard-attendance-validate' %}"
                hx-trigger="load"
            ></div>
        </div>

    {% elif chart == "onboarding_candidates" and "onboarding_candidates" in charts %}
        <!-- Onboarding Candidates -->
        <div
            class="xl:col-span-6 md:col-span-12 col-span-12 bg-white p-6 rounded-md shadow-card group"
            id="onboarding_candidates"
        >
            <div class="flex justify-between items-center mb-2">
                <h3 class="text-md font-semibold">
                    {% trans "Candidates Started Onboarding" %}
                </h3>

                <span class="float-end hidden group-hover:block " role="button"
                    hx-post="{% url 'dashboard-components-toggle' %}?chart_id=onboarding_candidates"
                    hx-target="closest .shadow-card" hx-swap="outerHTML"
                >
                    <i class="material-icons fw-lighter fs-5">close</i>
                </span>
            </div>
            <div class="relative">
                <canvas id="onboardCandidate" class="w-40 h-64"></canvas>
            </div>
            <div
                id="onboardCandidateLegend"
                class="mt-4 flex justify-center flex-wrap gap-3 text-xs"
            ></div>
        </div>

    {% elif chart == "hired_candidates" and "hired_candidates" in charts %}
        <!-- Hired Chart -->
        <div
            class="xl:col-span-6 md:col-span-12 col-span-12 bg-white p-6 rounded-md shadow-card group"
            id="hired_candidates"
        >
            <div class="flex justify-between items-center mb-5">
                <h3 class="text-md font-semibold">
                    {% trans "Hired Candidates" %}
                </h3>

                <span class="float-end hidden group-hover:block " role="button"
                    hx-post="{% url 'dashboard-components-toggle' %}?chart_id=hired_candidates"
                    hx-target="closest .shadow-card" hx-swap="outerHTML"
                >
                    <i class="material-icons fw-lighter fs-5">close</i>
                </span>
            </div>
            <div class="relative h-[350px]">
                <canvas id="hiredCandidate" class="w-40"></canvas>
            </div>
            <div
                id="hiredLegend"
                class="mt-4 flex justify-center flex-wrap gap-3 text-xs"
            ></div>
        </div>

    {% elif chart == "asset_request_approve" and "asset_request_approve" in charts %}
        <!-- Asset Request Table -->
        <div
            class="xl:col-span-6 md:col-span-12 col-span-12 bg-white p-6 rounded-md shadow-card group"
            id="asset_request_approve"
        >
            <div class="flex justify-between items-center mb-2">
                <h3 class="text-md font-semibold">
                    {% trans "Asset Requests To Approve" %}
                </h3>

                <span class="float-end hidden group-hover:block " role="button"
                    hx-post="{% url 'dashboard-components-toggle' %}?chart_id=asset_request_approve"
                    hx-target="closest .shadow-card" hx-swap="outerHTML"
                >
                    <i class="material-icons fw-lighter fs-5">close</i>
                </span>
            </div>
            <div
                class="flex-col items-center justify-center"
                hx-get='{% url "dashboard-asset-request-approve" %}'
                hx-trigger="load"
            >
            </div>
        </div>

    {% elif chart == "online_employees" and "online_employees" in charts %}
        <!-- Online Employees -->
        <div
            class="xl:col-span-6 md:col-span-12 col-span-12 bg-white p-6 rounded-md shadow-card group"
            id="online_employees"
        >
            <div class="flex justify-between items-center mb-2">
                <h3 class="text-md font-semibold">
                    {% trans "Online Employees" %}
                </h3>

                <span class="float-end hidden group-hover:block " role="button"
                    hx-post="{% url 'dashboard-components-toggle' %}?chart_id=online_employees"
                    hx-target="closest .shadow-card" hx-swap="outerHTML"
                >
                    <i class="material-icons fw-lighter fs-5">close</i>
                </span>
            </div>
            <div
                class="flex-col items-center justify-center h-[400px]"
                hx-get="{% url 'not-out-yet' %}"
                hx-trigger="load"
            ></div>
        </div>

    {% elif chart == "offline_employees" and "offline_employees" in charts %}
        <!-- Offline Employees -->
        <div
            class="xl:col-span-6 md:col-span-12 col-span-12 bg-white p-6 rounded-md shadow-card group"
            id="offline_employees"
        >
            <div class="flex justify-between items-center mb-2">
                <h3 class="text-md font-semibold">
                    {% trans "Offline Employees" %}
                </h3>

                <span class="float-end hidden group-hover:block " role="button"
                    hx-post="{% url 'dashboard-components-toggle' %}?chart_id=offline_employees"
                    hx-target="closest .shadow-card" hx-swap="outerHTML"
                >
                    <i class="material-icons fw-lighter fs-5">close</i>
                </span>
            </div>
            <div
                class="flex-col items-center justify-center"
                hx-get="{% url 'not-in-yet' %}"
                hx-trigger="load"
            ></div>
        </div>

    {% elif chart == "overtime_approve" and "overtime_approve" in charts %}
        <!-- Overtime Chart -->
        <div
            class="xl:col-span-6 md:col-span-12 col-span-12 bg-white p-6 rounded-md shadow-card group"
            id="overtime_approve"
        >
            <div class="flex justify-between items-center mb-2">
                <h3 class="text-md font-semibold">
                    {% trans "Overtime To Approve" %}
                </h3>

                <span class="float-end hidden group-hover:block " role="button"
                    hx-post="{% url 'dashboard-components-toggle' %}?chart_id=overtime_approve"
                    hx-target="closest .shadow-card" hx-swap="outerHTML"
                >
                    <i class="material-icons fw-lighter fs-5">close</i>
                </span>
            </div>
            <div
                class="flex-col items-center justify-center"
                hx-get="{% url 'dashboard-overtime-approve' %}"
                hx-trigger="load"
            ></div>
        </div>

    {% elif chart == "attendance_analytic" and "attendance_analytic" in charts %}
        <!-- Attendance Analytic Chart -->
        <div
            class="xl:col-span-6 md:col-span-12 col-span-12 bg-white p-6 rounded-md shadow-card group"
            id="attendance_analytic"
        >
            <div class="flex justify-between items-center mb-4">
                <h3 class="text-md font-semibold">
                    {% trans "Attendance Analytic" %}
                </h3>

                <span class="float-end hidden group-hover:block " role="button"
                    hx-post="{% url 'dashboard-components-toggle' %}?chart_id=attendance_analytic"
                    hx-target="closest .shadow-card" hx-swap="outerHTML"
                >
                    <i class="material-icons fw-lighter fs-5">close</i>
                </span>
            </div>
            <div class="flex gap-2 justify-between items-center mb-4">
                <select
                    id="type"
                    class="oh-input w-40 text-[#5e5c5c]"
                    name="type"
                    onchange="changeView(this)"
                >
                    <option value="day">{% trans "Day" %}</option>
                    <option value="weekly">{% trans "Weekly" %}</option>
                    <option value="monthly">{% trans "Monthly" %}</option>
                    <option value="date_range">{% trans "Date range" %}</option>
                </select>
                <input
                    type="date"
                    id="attendance_month"
                    onchange="changeMonth()"
                    class="oh-input w-40"
                />
            </div>
            <div class="w-full">
                <div class="relative h-[350px]">
                    <canvas id="dailyAnalytic"></canvas>
                </div>
            </div>
        </div>

    {% elif chart == "hours_chart" and "hours_chart" in charts %}
        <!-- Hours Chart -->
        <div
            class="xl:col-span-6 md:col-span-12 col-span-12 bg-white p-6 rounded-md shadow-card group"
            id="hours_chart"
        >
            <div class="flex justify-between items-center mb-2">
                <h3 class="text-md font-semibold">{% trans "Hours Chart" %}</h3>
                <div class="flex items-center gap-3">
                    <input
                        type="month"
                        class="mb-2 float-end pointer oh-input w-40"
                        id="hourAccountMonth"
                        onchange="dynamicMonth($(this))"
                    />
                    <span class="float-end hidden group-hover:block " role="button"
                        hx-post="{% url 'dashboard-components-toggle' %}?chart_id=hours_chart"
                        hx-target="closest .shadow-card" hx-swap="outerHTML"
                    >
                        <i class="material-icons fw-lighter fs-5">close</i>
                    </span>
                </div>
            </div>
            <div class="w-full">
                <div class="relative h-[370px]">
                    <canvas id="pendingHoursCanvas"></canvas>
                </div>
            </div>
        </div>

    {% elif chart == "overall_leave_chart" and "overall_leave_chart" in charts %}
        <!-- Overall Leave Chart -->
        <div
            class="xl:col-span-6 md:col-span-12 col-span-12 bg-white p-6 rounded-md shadow-card group"
            id="overall_leave_chart"
        >
            <div class="flex justify-between items-center mb-2">
                <h3 class="text-md font-semibold">{% trans "Overall Leave" %}</h3>
                <div class="flex items-center gap-3">
                    <select
                        class="oh-input float-end w-40"
                        name=""
                        id="overAllLeaveSelect"
                    >
                        <option value="today" selected>{% trans "Today" %}</option>
                        <option value="week">{% trans "This Week" %}</option>
                        <option value="month">{% trans "This Month" %}</option>
                        <option value="year">{% trans "This Year" %}</option>
                    </select>

                    <span class="float-end hidden group-hover:block " role="button"
                        hx-post="{% url 'dashboard-components-toggle' %}?chart_id=overall_leave_chart"
                        hx-target="closest .shadow-card" hx-swap="outerHTML"
                    >
                        <i class="material-icons fw-lighter fs-5">close</i>
                    </span>
                </div>
            </div>
            <div class="w-full max-w-xs mx-auto">
                <div class="relative">
                    <canvas id="overAllLeave"></canvas>
                </div>
            </div>
        </div>

    {% elif chart == "leave_request_approve" and "leave_request_approve" in charts %}
        <!-- Leave Approve Chart -->
        <div
            class="xl:col-span-6 md:col-span-12 col-span-12 bg-white p-6 rounded-md shadow-card group"
            id="leave_request_approve"
        >
            <div class="flex justify-between items-center mb-2">
                <h3 class="text-md font-semibold">
                    {% trans "Leave Requests To Approve" %}
                </h3>

                <span class="float-end hidden group-hover:block " role="button"
                    hx-post="{% url 'dashboard-components-toggle' %}?chart_id=leave_request_approve"
                    hx-target="closest .shadow-card" hx-swap="outerHTML"
                >
                    <i class="material-icons fw-lighter fs-5">close</i>
                </span>
            </div>
            <div
                class="flex-col items-center justify-center"
                hx-get="{% url 'leave-request-and-approve' %}"
                hx-trigger="load"
            ></div>
        </div>

    {% elif chart == "leave_allocation_approve" and "leave_allocation_approve" in charts %}
        <!-- Leave Allocation Approve -->
        <div
            class="xl:col-span-6 md:col-span-12 col-span-12 bg-white p-6 rounded-md shadow-card group"
            id="leave_allocation_approve"
        >
            <div class="flex justify-between items-center mb-2">
                <h3 class="text-md font-semibold">
                    {% trans "Leave Allocation Request To Approve" %}
                </h3>

                <span class="float-end hidden group-hover:block " role="button"
                    hx-post="{% url 'dashboard-components-toggle' %}?chart_id=leave_allocation_approve"
                    hx-target="closest .shadow-card" hx-swap="outerHTML"
                >
                    <i class="material-icons fw-lighter fs-5">close</i>
                </span>
            </div>
            <div
                class="flex-col items-center justify-center"
                hx-get="{% url 'leave-allocation-approve' %}"
                hx-trigger="load"
            ></div>
        </div>

    {% elif chart == "feedback_answer" and "feedback_answer" in charts %}
        <!-- Feedback Table -->
        <div
            class="xl:col-span-6 md:col-span-12 col-span-12 bg-white p-6 rounded-md shadow-card group"
            id="feedback_answer"
        >
            <div class="flex justify-between items-center mb-2">
                <h3 class="text-md font-semibold">
                    {% trans "Feedback To Answers" %}
                </h3>

                <span class="float-end hidden group-hover:block " role="button"
                    hx-post="{% url 'dashboard-components-toggle' %}?chart_id=feedback_answer"
                    hx-target="closest .shadow-card" hx-swap="outerHTML"
                >
                    <i class="material-icons fw-lighter fs-5">close</i>
                </span>
            </div>
            <div
                class="flex-col items-center justify-center"
                hx-get="{% url 'dashboard-feedback-answer' %}"
                hx-trigger="load"
            ></div>
        </div>

    {% elif chart == "feedback_status" and "feedback_status" in charts %}
        <!-- Feedback Chart -->
        <div
            class="xl:col-span-6 md:col-span-12 col-span-12 bg-white p-6 rounded-md shadow-card group"
            id="feedback_status"
        >
            <div class="flex justify-between items-center mb-2">
                <h3 class="text-md font-semibold">{% trans "Feedback Status" %}</h3>

                <span class="float-end hidden group-hover:block " role="button"
                    hx-post="{% url 'dashboard-components-toggle' %}?chart_id=feedback_status"
                    hx-target="closest .shadow-card" hx-swap="outerHTML"
                >
                    <i class="material-icons fw-lighter fs-5">close</i>
                </span>
            </div>
            <div class="w-full max-w-xs mx-auto">
                <div class="relative">
                    <canvas id="feedbackChart"></canvas>
                </div>
                <div
                    id="feedbackChartLegend"
                    class="mt-4 flex justify-center flex-wrap gap-3 text-xs"
                ></div>
            </div>
        </div>

    {% elif chart == "objective_status" and "objective_status" in charts %}
        <!-- Objective Chart -->
        <div
            class="xl:col-span-6 md:col-span-12 col-span-12 bg-white p-6 rounded-md shadow-card group"
            id="objective_status"
        >
            <div class="flex justify-between items-center mb-2">
                <h3 class="text-md font-semibold">
                    {% trans "Objective Status" %}
                </h3>

                <span class="float-end hidden group-hover:block " role="button"
                    hx-post="{% url 'dashboard-components-toggle' %}?chart_id=objective_status"
                    hx-target="closest .shadow-card" hx-swap="outerHTML"
                >
                    <i class="material-icons fw-lighter fs-5">close</i>
                </span>
            </div>
            <div class="w-full max-w-xs mx-auto">
                <div class="relative">
                    <canvas id="objectiveChart"></canvas>
                </div>
                <div
                    id="feedbackChartLegend"
                    class="mt-4 flex justify-center flex-wrap gap-3 text-xs"
                ></div>
            </div>
        </div>
    {% endif %}
{% empty %}
        <div class="oh-wrapper col-span-12" align="center" >
            <div class="bg-white p-6 rounded-md shadow-card h-full">
                <div class="flex flex-col items-center justify-center h-full">
                    <img src="/static/horilla_theme/assets/img/no-records.svg" alt="" width="300" class="mb-4">
                    <p class="text-[#666] mb-5">{% trans "No charts are available at the moment..." %}</p>
                </div>
            </div>
        </div>
{% endfor %}
