{% load static i18n %}
{% get_available_languages as LANGUAGES %}
<div
    class="dropdown-content w-56 absolute z-10 bg-white rounded-lg [box-shadow:0px_0px_20px_0px_rgb(0_0_0_/_8%)] py-2 right-0"
>
    <ul class="text-sm overflow-hidden overflow-y-auto">
        {% for language in LANGUAGES %}
            {% with IMAGE_PATH='images/ui/'|add:language.0|add:'.png' %}
                <li>
                    <button
                        class="px-4 py-1.5 hover:text-primary-600 transition duration-300 text-sm gap-4 items-center flex w-full"
                        onclick="event.preventDefault();document.getElementById('language-form-{{ language.0 }}').submit();"
                    >
                        <div class="flex items-center gap-2">
                            <span class="rounded-full overflow-hidden w-6 h-6">
                                <img
                                    src="{% static IMAGE_PATH %}"
                                    alt=""
                                    class="object-cover w-full h-full"
                                />
                            </span>
                            {{ language.1 }}
                            {% if language.0 == LANGUAGE_CODE %}
                                <span class="rounded-full overflow-hidden w-6 h-6">
                                    <ion-icon name="checkmark-circle-outline"
                                        style="position: relative; top: 3.3px; color: green; font-size: 1.2em;">
                                    </ion-icon>
                                </span>
                            {% endif %}
                        </div>
                    </button>
                    <form id="language-form-{{ language.0 }}"
                        action="{% url 'set_language' %}"
                        method="post"
                        style="display: none;"
                    >
                        {% csrf_token %}
                        <input type="hidden" name="language" value="{{ language.0 }}">
                    </form>
                </li>
            {% endwith %}
        {% endfor %}
    </ul>
</div>
