{% load basefilters%} {% load static i18n %}

{% with can_change=perms.base.change_rotatingworktypeassign can_delete=perms.base.delete_rotatingworktypeassign is_reporting_manager=request.user|is_reportingmanager %}

    {% if can_change or is_reporting_manager %}
        <!-- Start of Edit Button -->
        <button data-toggle="oh-modal-toggle" data-target="#genericModal"
            hx-get="{% url 'rotating-work-type-assign-update' instance.id %}" hx-target="#genericModalBody"
            class="w-24 px-4 py-2 bg-primary-600 text-white rounded-md text-xs flex items-center justify-center gap-2 hover:bg-primary-800 transition duration-300">
            <img src="{% static 'horilla_theme/assets/img/icons/edit.svg' %}" alt="{% trans 'Edit' %}" width="13"
                class="filter brightness-0 invert" />
            {% trans 'Edit' %}
        </button>
        <!-- End of Edit Button -->

        {% with is_active=instance.is_active %}
            <!-- Start of Archive/Unarchive Form -->
            <form hx-confirm="
                {% if is_active %}
                    {% trans 'Do you want to archive this rotating work type assign ?' %}
                {% else %}
                    {% trans 'Do you want to un-archive this rotating work type assign ?' %}
                {% endif %}
                "
                hx-get="{% url 'rotating-work-type-assign-archive' instance.id %}" hx-target="#genericModalBody">
                <button type="submit"
                    class="w-24 px-4 py-2 bg-white rounded-md text-xs flex items-center justify-center gap-2 border border-primary-500 hover:border-primary-600 transition duration-300">
                    <img src="{% static 'horilla_theme/assets/img/icons/' %}{% if is_active %}archive{% else %}unarchive{% endif %}.svg"
                        alt="{% if is_active %}{% trans 'Archive' %}{% else %}{% trans 'Un-archive' %} {% endif %}" width="16" class="mt-[-1px]">
                        {% if is_active %} {% trans "Archive" %} {% else %} {% trans "Un-archive" %} {% endif %}
                </button>
            </form>
            <!-- End of Archive/Unarchive Form -->
        {% endwith %}
    {% endif %}

    {% if can_delete or is_reporting_manager %}
        <!-- Start of Delete Form -->
        <form hx-confirm="{% trans 'Are you sure you want to delete this rotating work type assign ?' %}"
            hx-post="{% url 'rotating-work-type-assign-delete' instance.id %}?instances_ids={{request.GET.instance_ids}}"
            hx-target="#genericModalBody">
            {% csrf_token %}
            <button data-action="delete" type="submit"
                class="w-24 px-4 py-2 bg-white rounded-md text-xs flex items-center justify-center gap-2 border border-primary-500 hover:border-primary-600 transition duration-300">
                <img src="{% static 'horilla_theme/assets/img/icons/trash.svg' %}" alt="{% trans 'Delete' %}" width="16"
                    class="mt-[-1px]" />
                {% trans 'Delete' %}
            </button>
        </form>
        <!-- End of Delete Form -->
    {% endif %}

{% endwith %}

{% if request.GET.deleted %}
<script>
    $("#reloadMessagesButton").click();
</script>
{% endif %}
