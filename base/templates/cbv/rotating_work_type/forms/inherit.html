{% load i18n %}
<div>
    {% include "generic/horilla_form.html" %}
</div>
<div id="moreWorkTypeContainer_{{form.work_type_counts|add:2}}" class="pt-2" style="text-align: end;">
<button
    hidden
      id="hidden"
      hx-target="#moreWorkTypeContainer_{{form.work_type_counts|add:2}}"
      hx-swap="outerHTML"
      hx-post="{% url 'add-remove-work-type-fields' %}"
      role="button"
      style="color: green"
    >
      {% trans "Add more work types.." %}
    </button>
</div>


   <script>

        $(document).ready(function() {
            var workCount = {{ form.work_type_counts }} - 1;
            var workCounts = {{ form.work_type_counts }};

            for (var i = 1; i < workCounts; i++) {
                var parentDivId = "id_work_type" + i + "_parent_div";
                var parentDiv = document.getElementById(parentDivId);
                $(parentDiv).removeClass("col-md-6").addClass("col-md-12");
                if (i > 2) {
                    $(parentDiv).find('.oh-label__info').remove();
                }
            }

            var divElement = document.createElement('div');
            var test = {{ form.work_type_counts }} - 1;
            divElement.id = 'moreWorkTypeContainer_{{form.work_type_counts|add:2}}';
            divElement.className = 'pt-2';
            divElement.style.textAlign = 'end';

            var anchorElement = document.createElement('a');
            anchorElement.setAttribute('role', 'button');
            anchorElement.setAttribute('id', 'link');
            anchorElement.style.color = 'green';
            anchorElement.innerText = 'Add more Work Types..';

            divElement.appendChild(anchorElement);

            var parentDivId = "id_work_type" + test + "_parent_div";
            var parentDiv = document.getElementById(parentDivId);
            if (!document.getElementById('link')) {
            if (parentDiv) {
                parentDiv.insertAdjacentElement('afterend', divElement);
            } else {
                var parentDiv = document.getElementById('id_work_type2_parent_div');
                parentDiv.insertAdjacentElement('afterend', divElement);
            }
        }

        $(document).off('click', '#link').on('click', '#link', function(e) {
            e.preventDefault();
            $('#hidden').trigger('click');
        });
    });

</script>
