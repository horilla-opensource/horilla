{% load i18n %}
{% load basefilters %}
{% load static %}
<div class="oh-sticky-table__right" onclick="event.stopPropagation();">

    <div class="oh-btn-group" >

      {% if request.user.employee_get == instance.reallocate_to and not request.user|is_reportingmanager %}
        {% if instance.approved == True or instance.canceled == True or instance.reallocate_approved == True %}
          <button class='oh-btn oh-btn--success w-100' disabled>
            <ion-icon name="checkmark-outline"></ion-icon>
          </button>
        {% else %}
          <a href="/shift-allocation-request-approve/{{instance.id}}/" onclick="return confirm('{% trans "Are you available for this shift reallocation?" %}')" class='oh-btn oh-btn--success w-100' title='{% trans "Available" %}'>
            <ion-icon name="checkmark-outline"></ion-icon>
          </a>
        {% endif %}
      {% endif %}

      {% if perms.base.change_shiftrequest or request.user|is_reportingmanager %}
        {% if instance.approved == False and instance.canceled == False %}
          <a href="/shift-request-approve/{{instance.id}}/" onclick="return confirm('{% trans "Do you want to approve this request?" %}')" class='oh-btn oh-btn--success w-100' title='{% trans "Approve" %}'>
            <ion-icon class="me-1" name="checkmark-outline"></ion-icon>
          </a>

        {% else %}
          <button class='oh-btn oh-btn--success w-100' disabled>
            <ion-icon class="me-1" name="checkmark-outline"></ion-icon>
          </button>
        {% endif %}
      {% endif %}

      {% if request.user.employee_get == instance.reallocate_to and not request.user|is_reportingmanager %}
        {% if instance.reallocate_canceled == True or instance.approved == True %}
          <button class='oh-btn oh-btn--danger w-100' disabled>
            <ion-icon name="close-circle-outline"></ion-icon>
          </button>
        {% else %}
          <a href="/shift-allocation-request-cancel/{{instance.id}}/" onclick="return confirm('{% trans "Are you not available for this shift reallocation?" %}')" class='oh-btn oh-btn--danger w-100' title='{% trans "Not available" %}'>
            <ion-icon name="close-circle-outline"></ion-icon>
          </a>
        {% endif %}
      {% endif %}

      {% if request.user.employee_get == instance.employee_id and not request.user|is_reportingmanager %}

        {% if instance.approved == False and not instance.canceled   %}
          <a hx-get="{% url 'shift-allocation-request-update' instance.id %}" hx-target='#shiftRequestModalUpdateBody' data-toggle="oh-modal-toggle" data-target='#shiftRequestModalUpdate' class="oh-btn oh-btn--light-bkg w-50" title="{% trans 'Edit' %}"><ion-icon name="create-outline"></ion-icon></a>
        {% else %}
          <button class="oh-btn oh-btn--light-bkg w-50" disabled><ion-icon name="create-outline" ></ion-icon></button></td>
        {% endif %}
        {% if instance.approved == False and instance.canceled == False %}
          <form action="{% url 'shift-request-delete' instance.id  %}" onsubmit="return confirm('{% trans "Are you sure you want to delete this shift request?" %}');" method='post' class="w-50">
            {% csrf_token %}
            <button type='submit' class="oh-btn oh-btn--danger-outline oh-btn--light-bkg w-100" title="{% trans 'Remove' %}"><ion-icon name="trash-outline"></ion-icon></button>
          </form>
        {% else %}
          <button class="oh-btn oh-btn--light-bkg w-50" disabled><ion-icon name="trash-outline"></ion-icon></button></td>
        {% endif %}
      {% endif %}


      {% if request.user|is_reportingmanager %}
        {% if instance.canceled == True %}
          <button disabled class='oh-btn oh-btn--danger w-100'>
            <ion-icon class="me-1" name="close-circle-outline"></ion-icon>
          </button>
        {% else %}
          <a href="/shift-allocation-request-cancel/{{instance.id}}/" onclick="return confirm('{% trans "Do you want to reject this request?" %}')" class='oh-btn oh-btn--danger w-100' title='{% trans "Reject" %}'>
            <ion-icon class="me-1" name="close-circle-outline"></ion-icon>
          </a>
        {% endif %}
      {% endif %}
    </div>
  </div>
