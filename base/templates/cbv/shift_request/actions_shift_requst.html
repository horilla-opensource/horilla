{% load basefilters %}
{% load static i18n %}
{% is_manager_of request.user instance as can_manage %}
{% with is_owner=request.user.employee_get|equals:instance.employee_id can_change=perms.base.change_shiftrequest can_add=perms.base.add_shiftrequest can_delete=perms.base.delete_shiftrequest %}
    {% if is_owner or can_change or can_add or can_delete or can_manage %}
        <div class="oh-btn-group" onclick="event.stopPropagation();">
            {% if is_owner or can_change or can_manage %}
                {% if instance.approved == False and not instance.canceled %}
                    <a hx-get="{% url 'shift-request-update' instance.id %}?instance_ids={{instance.ordered_ids}}"
                        hx-target='#genericModalBody' data-toggle="oh-modal-toggle" data-target='#genericModal'
                        class="oh-btn oh-btn--light-bkg w-100" title="{% trans 'Edit' %}"><ion-icon
                            name="create-outline"></ion-icon></a>
                {% else %}
                    <button class="oh-btn oh-btn--light-bkg w-100" disabled><ion-icon name="create-outline"></ion-icon></button>
                {% endif %}
            {% endif %}

            {% if is_owner or can_add or can_manage %}
                <a class="oh-btn oh-btn--light-bkg w-100" data-toggle="oh-modal-toggle" data-target="#genericModal"
                    hx-get="{% url 'shift-request-duplicate' instance.id %}?{{pg}}" title="{% trans 'Duplicate' %}"
                    hx-target="#genericModalBody" style="cursor: pointer;">
                    <ion-icon name="copy-outline"></ion-icon>
                </a>
            {% endif %}

            {% if is_owner or can_delete or can_manage %}
                {% if instance.approved == False and instance.canceled == False %}
                    <a class="oh-btn oh-btn--danger-outline oh-btn--light-bkg w-100"
                        hx-confirm="{% trans 'Are you sure you want to delete this shift request?' %}"
                        hx-post="{% url 'shift-request-delete' instance.id %}" hx-target="#shift-container"
                        title="{% trans 'Remove' %}">
                        <ion-icon name="trash-outline"></ion-icon>
                    </a>
                {% else %}
                    <button class="oh-btn oh-btn--danger-outline oh-btn--light-bkg w-100" disabled><ion-icon
                            name="trash-outline"></ion-icon></button>
                {% endif %}
            {% endif %}
        </div>
    {% endif %}
{% endwith %}
