{% load basefilters %}
{% load i18n %}
{% is_manager_of request.user instance as can_manage %}
{% with can_add=perms.base.add_worktyperequest can_change=perms.base.change_worktyperequest  can_delete=perms.base.delete_worktyperequest %}
<div class="" onclick="event.stopPropagation();">
    {% if request.user.employee_get == instance.employee_id or can_add or can_change or can_delete or can_manage %}
        <div class="oh-btn-group">
            {% if request.user.employee_get == instance.employee_id or can_change or can_manage %}
                {% if instance.approved == False and not instance.canceled %}
                    <a hx-get="{% url 'work-type-request-update' instance.id %}?instance_ids={{instance.ordered_ids}}"
                        hx-target='#genericModalBody' data-toggle="oh-modal-toggle" data-target='#genericModal'
                        class="oh-btn oh-btn--light-bkg w-100" title="{% trans 'Edit' %}">
                        <ion-icon name="create-outline"></ion-icon>
                    </a>
                {% else %}
                    <button class="oh-btn oh-btn--light-bkg w-100" disabled><ion-icon name="create-outline"></ion-icon></button>
                {% endif %}
            {% endif %}

            {% if request.user.employee_get == instance.employee_id or can_add or can_manage %}
                <a onclick="event.stopPropagation();" class="oh-btn oh-btn--light-bkg w-100" data-toggle="oh-modal-toggle"
                    data-target="#genericModal" hx-get="{% url 'work-type-request-duplicate' instance.id %}?{{pg}}"
                    title="{% trans 'Duplicate' %}" hx-target="#genericModalBody" style="cursor: pointer;">
                    <ion-icon name="copy-outline"></ion-icon>
                </a>
            {% endif %}

            {% if request.user.employee_get == instance.employee_id or can_delete or can_manage %}
                {% if instance.approved == False and instance.canceled == False %}
                    <a hx-confirm="{% trans 'Are you sure you want to delete this work type request?' %}"
                        hx-post="{% url 'work-type-request-delete' instance.id  %}" hx-target="#work-shift"
                        class="oh-btn oh-btn--danger-outline oh-btn--light-bkg w-100" title="{% trans 'Remove' %}">

                        <ion-icon name="trash-outline"></ion-icon>
                    </a>
                {% else %}
                    <button class="oh-btn oh-btn--light-bkg w-100" disabled><ion-icon name="trash-outline"></ion-icon></button>
                {% endif %}
            {% endif %}
        </div>
    {% endif %}
</div>
{% endwith %}
