<form hx-post="{{request.path}}?{{request.GET.urlencode}}" hx-swap="outerHTML" hx-encoding="multipart/form-data">
  <input hidden type="submit" id="allocationEmployeeFormsSubmit">
  <input hidden type="text" name="instance_id" value="{{request.GET.instance_id}}">

{% load widget_tweaks %} {% load i18n %}
{% load generic_template_filters %}
<script>
  $("#reloadMessagesButton").click()
</script>
<style>
  .oh-label{
    font-weight: bold;
  }
</style>

<div id="{{form.container_id}}">
    <div class="oh-profile-section__card row">
      <div class="row" style="padding-right: 0;">
        <div class="col-12" style="padding-right: 0;">{{ form.non_field_errors }}</div>
        {% for field in form.visible_fields %}
        <div class="col-12 col-md-{{field|col}}" id="id_{{ field.name }}_parent_div" style="padding-right: 0;">
          <div class="oh-label__info" for="id_{{ field.name }}">
            <label class="oh-label {% if field.field.required %} required-star{% endif %}" for="id_{{ field.name }}"
              >{% trans field.label %}</label
            >
            {% if field.help_text != '' %}
            <span
              class="oh-info mr-2"
              title="{{ field.help_text|safe }}"
            ></span>
            {% endif %}
          </div>

          {% if field.field.widget.input_type == 'checkbox' %}
          <div class="oh-switch" style="width: 30px">
            {{ field|add_class:'oh-switch__checkbox' }}
          </div>
          {% else %}
          <div id="dynamic_field_{{field.name}}">
            {{ field|add_class:'form-control' }}
            {{ field.errors }}
          </div>
          {% endif %}
        </div>
        {% endfor %}
      </div>

      {% for field in form.hidden_fields %} {{ field }} {% endfor %}
    </div>
  </div>
  <script>
    {% include 'country.js' %}
    populateCountries("country", "state");
    $('.oh-general__tab-target.oh-profile-section').not('.d-none').find('form').find('select[name=country]').val('{{form.instance.country}}').change()
    $('.oh-general__tab-target.oh-profile-section').not('.d-none').find('form').find('select[name=state]').val('{{form.instance.state}}').change()
  </script>
</form>
