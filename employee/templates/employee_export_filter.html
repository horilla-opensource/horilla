{% load i18n %} {% load static %}
<div class="oh-modal__dialog-header">
    <h2 class="oh-modal__dialog-title" id="employeeExportLavel">
        {% trans "Export Employees" %}
    </h2>
    <button class="oh-modal__close" aria-label="Close">
        <ion-icon name="close-outline"></ion-icon>
    </button>
    <div class="oh-modal__dialog-body p-0 pt-2 pb-4" id="employeeExportModalBody">
        <form action="{%url 'work-info-export' %}" method="get" class="oh-profile-section"
            onsubmit="event.stopPropagation();$(this).parents().find('.oh-modal--show').last().toggleClass('oh-modal--show');"
            id="employeeExportForm">
            {% csrf_token %}
            <div class="oh-dropdown__filter-body">
                <div class="oh-accordion">
                    <div class="oh-accordion-header">{% trans "Select Columns to Export" %}</div>
                    <div class="oh-accordion-body">
                        <div class="row mb-3">
                            <div class="col-12">
                                <div class="oh-input-group">
                                    <label class="oh-label d-flex align-items-center">
                                        <input type="checkbox" id="select-all-fields" class="me-2" /> 
                                        <span class="fw-bold">{% trans "Select All Columns" %}</span>
                                    </label>
                                </div>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-12">
                                <h6 class="mb-3">{% trans "Basic Information" %}</h6>
                            </div>
                            {% for field in export_form.selected_fields %}
                                {% if field.data.value in "badge_id,employee_first_name,employee_last_name,email,phone,gender,dob,country,state,city,address,zip,marital_status,children,is_active,emergency_contact,emergency_contact_name,emergency_contact_relation,nic,epf_no,epf_amount,etf_amount" %}
                                <div class="col-sm-12 col-md-6 col-lg-4 mb-3">
                                    <div class="oh-input-group">
                                        <label class="oh-label d-flex align-items-center">
                                            <input type="checkbox" name="selected_fields" value="{{ field.data.value }}" 
                                                {% if field.data.selected %}checked{% endif %} class="me-2" />
                                            {{ field.data.label }}
                                        </label>
                                    </div>
                                </div>
                                {% endif %}
                            {% endfor %}
                            
                            <div class="col-12 mt-4">
                                <h6 class="mb-3">{% trans "Work Information" %}</h6>
                            </div>
                            {% for field in export_form.selected_fields %}
                                {% if 'employee_work_info__' in field.data.value %}
                                <div class="col-sm-12 col-md-6 col-lg-4 mb-3">
                                    <div class="oh-input-group">
                                        <label class="oh-label d-flex align-items-center">
                                            <input type="checkbox" name="selected_fields" value="{{ field.data.value }}" 
                                                {% if field.data.selected %}checked{% endif %} class="me-2" />
                                            {{ field.data.label }}
                                        </label>
                                    </div>
                                </div>
                                {% endif %}
                            {% endfor %}
                            
                            <div class="col-12 mt-4">
                                <h6 class="mb-3">{% trans "Bank Information" %}</h6>
                            </div>
                            {% for field in export_form.selected_fields %}
                                {% if 'employee_bank_details__' in field.data.value %}
                                <div class="col-sm-12 col-md-6 col-lg-4 mb-3">
                                    <div class="oh-input-group">
                                        <label class="oh-label d-flex align-items-center">
                                            <input type="checkbox" name="selected_fields" value="{{ field.data.value }}" 
                                                {% if field.data.selected %}checked{% endif %} class="me-2" />
                                            {{ field.data.label }}
                                        </label>
                                    </div>
                                </div>
                                {% endif %}
                            {% endfor %}
                        </div>
                    </div>
                </div>
                <div class="oh-accordion">
                    <div class="oh-accordion-header">{% trans "Employee" %}</div>
                    <div class="oh-accordion-body">
                        <div class="row">
                            <div class="col-sm-12 col-md-12 col-lg-6">
                                <div class="oh-input-group">
                                    <label class="oh-label" for="{{export_filter.form.country.id_for_label}}">{% trans "Country" %}</label>
                                    {{export_filter.form.country}}
                                </div>
                            </div>
                            <div class="col-sm-12 col-md-12 col-lg-6">
                                <div class="oh-input-group">
                                    <label class="oh-label" for="{{export_filter.form.gender.id_for_label}}">{% trans "Gender" %}</label>
                                    {{export_filter.form.gender}}
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="oh-accordion">
                    <div class="oh-accordion-header">{% trans "Work Info" %}</div>
                    <div class="oh-accordion-body">
                        <div class="row">
                            <div class="col-sm-12 col-md-12 col-lg-6">
                                <div class="oh-input-group">
                                    <label class="oh-label"
                                        for="{{export_filter.form.employee_work_info__company_id.id_for_label}}">{% trans "Company" %}</label>
                                    {{export_filter.form.employee_work_info__company_id}}
                                </div>
                                <div class="oh-input-group">
                                    <label class="oh-label"
                                        for="{{export_filter.form.employee_work_info__department_id.id_for_label}}">{% trans "Department" %}</label>
                                    {{export_filter.form.employee_work_info__department_id}}
                                </div>
                                <div class="oh-input-group">
                                    <label class="oh-label"
                                        for="{{export_filter.form.employee_work_info__shift_id.id_for_label}}">{% trans "Shift" %}</label>
                                    {{export_filter.form.employee_work_info__shift_id}}
                                </div>
                            </div>
                            <div class="col-sm-12 col-md-12 col-lg-6">
                                <div class="oh-input-group">
                                    <label class="oh-label"
                                        for="{{export_filter.form.employee_work_info__reporting_manager_id.id_for_label}}">{% trans "Reporting Manager" %}</label>
                                    {{export_filter.form.employee_work_info__reporting_manager_id}}
                                </div>
                                <div class="oh-input-group">
                                    <label class="oh-label"
                                        for="{{export_filter.form.employee_work_info__job_position_id.id_for_label}}">{% trans "Job Position" %}</label>
                                    {{export_filter.form.employee_work_info__job_position_id}}
                                </div>
                                <div class="oh-input-group">
                                    <label class="oh-label"
                                        for="{{export_filter.form.employee_work_info__work_type_id.id_for_label}}">{% trans "Work Type" %}</label>
                                    {{export_filter.form.employee_work_info__work_type_id}}
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="oh-modal__dialog-footer p-0 pt-4">
                <button type="submit" class="oh-btn oh-btn--secondary oh-btn--shadow">
                    {% trans "Export" %}
                </button>
            </div>
        </form>
    </div>
</div>
<script src='{% static "/base/filter.js" %}'></script>
