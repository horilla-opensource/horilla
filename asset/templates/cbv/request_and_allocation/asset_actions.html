{% load i18n %}
{% if perms.asset.change_assetassignment %}
<div onclick="event.stopPropagation();">
    <button
        href="#"
        class="oh-btn oh-btn--secondary"
        role="button"
        data-toggle="oh-modal-toggle"
        data-target="#objectCreateModal"
        hx-get="{% url 'asset-allocate-return' asset_id=instance.asset_id.id %}"
        hx-target="#objectCreateModalTarget"
    >
        <ion-icon name="return-down-back-sharp"></ion-icon>{% trans "Return" %}
    </button>
{% else %}
    {% if instance.return_request %}
        <div class="d-flex align-items-center">
            <span class="oh-dot oh-dot--small me-1 oh-dot--color oh-dot--info"></span>
            <span class="link-primary"> {% trans "Requested to return" %} </span>
        </div>
    {% else %}
        <form action="{% url 'asset-allocate-return-request' asset_id=instance.id %}"
              onsubmit="return confirm('{% trans "Are you sure you want to return this asset?" %}');">
            {% csrf_token %}
            <button type="submit" class="oh-btn oh-btn--secondary" onclick="event.stopPropagation();">
                <ion-icon name="return-down-back-sharp"></ion-icon>
                {% trans "Return Request" %}
            </button>
        </form>
    {% endif %}
{% endif %}
</div>
