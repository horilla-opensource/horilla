{% extends "index.html" %}
{% load i18n %}
{% load static %}
{% block content %}


<style>
    .canceled--dot{
        background-color:red;
      }
      .approved--dot{
        background-color:green;
      }
      .approved-True{
        border-left: 3.4px solid yellowgreen !important;
        border-radius: 4px 0 0 4px;

      }
      .canceled-True {

        border-left: 3.4px solid red !important;
        border-radius: 4px 0 0 4px;

      }
    </style>
<div hx-get="{% url "asset-history-nav" %}" hx-trigger="load">
</div>

{% include "generic/components.html" %}
<div
    class="oh-checkpoint-badge mb-2"
    id="selectedInstances"
    data-ids="[]"
    data-clicked=""
    style="display: none"
  ></div>

<div class="oh-wrapper"
 id="listContainer">
  <div class="animated-background">
</div>
</div>


<script src="{% static 'cbv/work_type_request/work_request_bulk_action.js' %}"></script>
<script>

function enlargeImage(src,$element) {
  $("#enlargeattachmentContainer").empty()
  var enlargeImageContainer = $("#enlargeattachmentContainer")
  enlargeImageContainer.empty()
  style = 'width:100%; height:90%; box-shadow: 0 10px 10px 0 rgba(0, 0, 0, 0.2), 0 6px 20px 0 rgba(0, 0, 0, 0.2); background:white'
  var enlargedImage = $('<iframe>').attr({ src: src, style: style })
  var name = $('<span>').text(src.split('/').pop().replace(/_/g, ' '))
  enlargeattachmentContainer.append(enlargedImage)
  enlargeattachmentContainer.append(name)
  setTimeout(function () {
      enlargeattachmentContainer.show()

      const iframe = document.querySelector('iframe').contentWindow
      var iframe_document = iframe.document
      iframe_image = iframe_document.getElementsByTagName('img')[0]
      $(iframe_image).attr('style', 'width:100%; height:100%;')
  }, 100)
}

function hideEnlargeImage() {
  var enlargeImageContainer = $('#enlargeattachmentContainer')
  enlargeImageContainer.empty()
}

$(document).on('click', function (event) {
  if (!$(event.target).closest('#enlargeattachmentContainer').length) {
      hideEnlargeImage()
  }
})
function submitForm(elem) {
$(elem).siblings(".add_more_submit").click();
}

toggleColumns("asset-table","asset_history_button")
if (!localStorage.getItem("asset_history_table")) {
$("#asset_history_button").find("[type=checkbox]").prop("checked",true).change()
}



function enlargeattachment(src,$element) {
  $("#enlargeattachmentContainer").empty()
  var enlargeattachmentContainer = $("#enlargeattachmentContainer")
  enlargeattachmentContainer.empty()
  style = 'width:100%; height:90%; box-shadow: 0 10px 10px 0 rgba(0, 0, 0, 0.2), 0 6px 20px 0 rgba(0, 0, 0, 0.2); background:white'
  var enlargedImage = $('<iframe>').attr({ src: src, style: style })
  var name = $('<span>').text(src.split('/').pop().replace(/_/g, ' '))
  enlargeattachmentContainer.append(enlargedImage)
  enlargeattachmentContainer.append(name)
  setTimeout(function () {
      enlargeattachmentContainer.show()

      const iframe = document.querySelector('iframe').contentWindow
      var iframe_document = iframe.document
      iframe_image = iframe_document.getElementsByTagName('img')[0]
      $(iframe_image).attr('style', 'width:100%; height:100%;')
  }, 100)
}

function hideEnlargeattachment() {
  var enlargeattachmentContainer = $('#enlargeattachmentContainer')
  enlargeattachmentContainer.empty()
}
$(document).on('click', function (event) {
if (!$(event.target).closest('#enlargeattachmentContainer').length) {
  hideEnlargeattachment()
}
})

</script>
{% endblock content %}
