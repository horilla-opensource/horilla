{% load static i18n %}
{% with can_crud=request.user|task_crud_perm:instance can_change=perms.project.change_task can_delete=perms.project.delete_task %}
    {% if can_crud or can_change %}
        <!-- Start of Edit Button -->
        <button hx-get="{% url 'update-task' instance.id %}?project_task=true" hx-target='#genericModalBody'
            data-toggle="oh-modal-toggle" data-target="#genericModal"
            class="w-24 px-4 py-2 bg-primary-600 text-white rounded-md text-xs flex items-center justify-center gap-2 hover:bg-primary-800 transition duration-300">
            <img src="{% static 'horilla_theme/assets/img/icons/edit.svg' %}" alt="{% trans 'Edit' %}" width="13"
                class="filter brightness-0 invert">
            {% trans 'Edit' %}
        </button>
        <!-- End of Edit Button -->
    {% endif %}

    <button hx-get="{% url 'task-timesheet' instance.id %}?employee_id={{request.user.employee_get.id}}"
        hx-target='#TaskTimesheetTarget' data-target="#TaskTimesheetModal" data-toggle="oh-modal-toggle"
        class="w-30 px-4 py-2 bg-white rounded-md text-xs flex items-center justify-center gap-2 border border-primary-500 hover:border-primary-600 transition duration-300">
        <img src="{% static 'horilla_theme/assets/img/icons/bar-chart.svg' %}"
            alt="{% trans 'Time sheet' %}" width="16" class="mt-[-1px]">
        {% trans 'Time sheet' %}
    </button>

    {% if can_delete or can_manage %}
        <!-- Start of Delete a Tag -->
        <a href="{% url 'delete-task' instance.id %}?view={{request.GET.view }}"
            data-action="delete" type="submit"
            onclick="event.preventDefault();event.stopPropagation(); confirm(`{% trans 'Do you want to delete this task?' %}`)"
            class="w-24 px-4 py-2 bg-white rounded-md text-xs flex items-center justify-center gap-2 border border-primary-500 hover:border-primary-600 transition duration-300">
            <img src="{% static 'horilla_theme/assets/img/icons/trash.svg' %}" alt="{% trans 'Delete' %}" width="16"
                class="mt-[-1px]">
            {% trans "Delete" %}
        </a>
        <!-- Start of Delete a Tag -->
    {% endif %}
{% endwith %}
