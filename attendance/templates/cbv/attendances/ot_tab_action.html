{% load i18n %} {% load static %} {% load basefilters %}

{% if request.user.employee_get != instance.employee_id and request.user|is_reportingmanager or perms.attendance.change_attendance or request.user|is_self_reporting_manager %}
	<!-- Start of Edit Button -->
	<button hx-get="{% url 'attendance-update' instance.id %}" hx-target="#genericModalBody" hx-swap="innerHTML"
		data-toggle="oh-modal-toggle" data-target="#genericModal"
		class="w-24 px-4 py-2 bg-primary-600 text-white rounded-md text-xs flex items-center justify-center gap-2 hover:bg-primary-800 transition duration-300">
		<img src="{% static 'horilla_theme/assets/img/icons/edit.svg' %}" alt="{% trans 'Edit' %}" width="13"
			class="filter brightness-0 invert" />
		{% trans 'Edit' %}
	</button>
	<!-- End of Edit Button -->

	<!-- Start of Attendance Approve a Tag -->
	{% if instance.attendance_overtime_approve %}
	<button disabled class="oh-btn oh-btn--success w-100" title="{% trans 'Approved' %}">
		<i class="fa-solid fa-check"></i>&nbsp;{% trans "Approved" %}
	</button>
	{% elif minot <= instance.overtime_second %}
		<a type="submit" href="{% url 'approve-overtime' instance.id %}"
		title="{% trans 'Approve Overtime' %}" class="oh-btn oh-btn-group oh-btn--success w-50"
		onclick="event.stopPropagation()">
		<ion-icon class="me-1" name="checkmark-done-outline"></ion-icon>{% trans "Approve" %}
		</a>
	{% else %}
		<a type="submit" href="#" title="{% trans 'Approve Overtime (OT < min.OT)' %}"
			class="oh-btn oh-btn-group oh-btn--warning w-50" onclick="event.stopPropagation();
			Swal.fire({
				title: '{% trans 'Are you sure?' %}',
				text: '{% trans 'This does not satisfy the minimum OT requirement!' %}',
				icon: 'warning',
				showCancelButton: true,
				confirmButtonColor: '#3085d6',
				cancelButtonColor: '#d33',
				confirmButtonText: 'Approve',
				cancelButtonText: 'Cancel'
			}).then((result) => {
				if (result.isConfirmed) {
				// Your approve action logic here
				Swal.fire(
					'{% trans 'Approved!' %}',
					'{% trans 'Your action has been approved.' %}',
					'success'
				);
				$('[data-ot-approve-id={{instance.id}}]').click();
				}
			});                                        ">
			<button
				style="background: none; color: inherit; border: none; padding: 0; font: inherit; cursor: pointer; outline: inherit;">
				<ion-icon class="me-1" name="checkmark-done-outline"></ion-icon>{% trans "Approve" %}
			</button>
		</a>
	{% endif %}
	<!-- End of Attendance Approve a Tag -->
{% endif %}

{% if request.user.employee_get != instance.employee_id and request.user|is_reportingmanager or perms.attendance.delete_attendance or request.user|is_self_reporting_manager %}
<!-- Start of Delete Form -->
<form action="{% url 'attendance-delete' instance.id %}" onclick="event.stopPropagation()"
	onsubmit="return confirm('{% trans " Are you sure want to delete this attendance?" %}')" method='post'>
	{% csrf_token %}
	<button data-action="delete" type="submit"
		class="w-24 px-4 py-2 bg-white rounded-md text-xs flex items-center justify-center gap-2 border border-primary-500 hover:border-primary-600 transition duration-300">
		<img src="{% static 'horilla_theme/assets/img/icons/trash.svg' %}" alt="{% trans 'Delete' %}" width="16"
			class="mt-[-1px]">
		{% trans 'Delete' %}
	</button>
</form>
<!-- End of Delete Form -->
{% endif %}
