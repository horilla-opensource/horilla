{% extends "index.html" %}
{% load static %}
{% load i18n %}

{% block content %}

<meta name="csrf-token" content="{{ csrf_token }}">
<div hx-get="{% url 'attendances-navbar-view' %}?{{ request.GET.urlencode }}" hx-trigger="load">
</div>

{% include "generic/components.html" %}
<div class="oh-checkpoint-badge mb-2" id="selectedInstances" data-ids="[]" data-clicked="" style="display: none"></div>
<div class="oh-checkpoint-badge mb-2" id="validateselectedInstances" data-ids="[]" data-clicked="" style="display: none"></div>
<div class="oh-checkpoint-badge mb-2" id="overtimeselectedInstances" data-ids="[]" data-clicked="" style="display: none"></div>
<div class="oh-checkpoint-badge mb-2" id="validatedselectedInstances" data-ids="[]" data-clicked="" style="display: none"></div>
<div class="oh-wrapper"  id="listContainer">
    <div class="animated-background"></div>
</div>


<!--import attendances-->
<div class="oh-modal" id="attendanceImport" role="dialog" aria-labelledby="attendanceImport" aria-hidden="true">
  <div class="oh-modal__dialog">
      <div class="oh-modal__dialog-header">
          <h2 class="oh-modal__dialog-title" id="attendanceImportLavel">
              {% trans "Import Attendances" %}
          </h2>
          <button class="oh-modal__close" aria-label="Close">
              <ion-icon name="close-outline"></ion-icon>
          </button>
          <div class="oh-modal__dialog-body p-0 pt-2" id="attendanceImportModalBody">
              <form hx-post="{% url 'attendance-info-import' %}" hx-encoding="multipart/form-data"
                  hx-target="#attendanceImport" id="attendanceImportForm">
                  {% csrf_token %}
                  <div class="oh-modal__dialog-body mr-5" id="uploading" style="display: none">
                      <div class="loader-container">
                          <div class="loader"></div>
                          <div class="loader-text">{% trans "Uploading..." %}</div>
                      </div>
                  </div>
                  <div id="uploadContainer">
                      <label class="oh-dropdown__import-label" for="uploadFile">
                          <ion-icon name="cloud-upload" class="oh-dropdown__import-form-icon"></ion-icon>
                          <span class="oh-dropdown__import-form-title">{% trans "Upload a File" %}</span>
                          <span class="oh-dropdown__import-form-text">{% trans "Drag and drop files here" %}</span>
                      </label>
                      <input type="file" name="attendance_import" id="" required />
                      <div class="d-inline float-end">
                          <a href="#" style="text-decoration:none; display: inline-block;"
                              class="oh-dropdown__link attendance-info-import" data-toggle="oh-modal-toggle"
                              data-target="#attendanceImport" onclick="importAttendanceNav();">
                              <ion-icon name="cloud-download-outline"
                                  style="font-size:20px; vertical-align: middle;"></ion-icon>
                              <span>{% trans "Download Template" %}</span>
                          </a>
                      </div>
                  </div>
                  <button type="submit" class="oh-btn oh-btn--small oh-btn--secondary w-100 mt-3">
                      {% trans "Upload" %}
                  </button>
              </form>
          </div>
      </div>
  </div>
</div>


<div class="oh-modal" id="activityViewModal" role="dialog" aria-hidden="true" style="z-index:1100;">
  <div class="oh-modal__dialog" style="max-width: 900px;">
    <div class="oh-modal__dialog-header">
      <h3 class="oh-main__titlebar-title fw-bold ">{% trans " Activities" %}</h3>
      <button class="oh-modal__close--custom" aria-label="Close"
      onclick="$(this).parents().closest('.oh-modal--show').toggleClass('oh-modal--show');">
      <ion-icon name="close-outline"></ion-icon>
      </button>
    </div>
    <div class="oh-modal__dialog-body" id="activityViewModalBody" style="overflow-x:auto;"></div>
  </div>
</div>



<script src="{% static 'cbv/attendance_activity.js' %}"></script>

{% endblock content %}
